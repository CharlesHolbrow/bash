# Charles' Shell Configuration
# To install: 
# $ echo "source bash_custom" >> .bash_profile

# Get platform
platform='unknown'
unamestr=`uname`
if [ "$unamestr" == 'Linux' ]; then
  platform='linux'
elif [ "$unamestr" == 'FreeBSD' ]; then
  platform='freebsd'
elif [ "$unamestr" == 'Darwin' ]; then
  platform='osx'
elif [[ "$unamestr" == CYGWIN* ]]; then
  platform='cygwin'
fi

echo ""
echo "----- platform: $platform -----"
echo ""

# Charles' git aliases
alias ga='git add'
alias gd='git diff'
alias gs='git status'
alias gc='git commit'
alias gcm='git commit -m'

# Charles misc aliases
alias ap='ack --python'
alias aj='ack --js'
alias ll='ls -l'
alias ..='cd ..'
alias ...='cd ../..'
alias ccat='highlight -O ansi'
alias sagent='eval $(ssh-agent) && ssh-add'

if [ $platform == 'linux' ]; then
    alias ack=ack-grep # is this for linux? or only debian?
fi

alias kc=kubectl

# display my aliases
alias

alias ....='cd ../../../'
alias .....='cd ../../../../'
alias ......='cd ../../../../../'

# meteor ack
mack() {
  find . ! -path '*node_modules*' ! -path '*.build*' ! -path '*.npm*' ! -path '*.meteor*' ! -path '.git' | grep '.*\.js\|.*\.coffee' | ack -x $1
}

# Colorize ls output
if [ $platform == 'linux' -o $platform == 'cygwin' ]; then
  alias ls='ls --color=auto'
elif [ $platform == 'freebsd' -o $platform == 'osx' ]; then
    alias ls='ls -G'
fi

# bash completion on osx (requires $brew install bash-completion)
if [ $platform == 'osx' ]; then
  if [ "$(which brew)" ]; then
    if type brew 2&>/dev/null; then
      for completion_file in $(brew --prefix)/etc/bash_completion.d/*; do
        source "$completion_file"
      done
    fi
  else
    echo 'Homebrew not installed'
  fi
fi

# Custom command prompt (with colors!)
export PS1="\u@\[$(tput setaf 5)\]\[$(tput bold)\]\h \[$(tput setaf 1)\]\W \[$(tput setaf 2)\]$\[$(tput sgr0)\] "
export SVN_EDITOR=emacs

# If emacs is installed, set it as the editor
which emacs && export EDITOR=emacs

# If kubectl is installed, setup bash completion
which kubectl && source <(kubectl completion bash)

# Meteor Helper
export PACKAGE_DIRS="/Users/charles/projects/meteor/PixelAetherPackages/:/Users/charles/projects/meteor/PixelAetherGameServer/packages/"
